<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Austin Elixir - Routing Securely with Phoenix Framework</title>

		<meta name="description" content="How to start a new Phoenix Framework project, setup users and authentication that works for both HTML and JSON API before enabling XSS-proof chat using channels.  The different requirements for HTML, JSON, and channel authentication with XSS and CSRF protection will be emphasized.">
		<meta name="author" content="Luke Imhoff">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Austin Elixir</h1>
					<h2>Routing Securely with Phoenix Framework</h2>
					<p>2015-09-02</p>
					<p>Luke Imhoff</p>
					<table>
                        <tbody>
                        <tr>
                            <th>
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                     version="1.1" id="Capa_1" x="0px" y="0px" width="14px" height="10px"
                                     viewBox="0 0 14 10" enable-background="new 0 0 14 10" xml:space="preserve">
                                     <g>
                                        <path d="M7,7L5.268,5.484L0.316,9.729C0.496,9.896,0.739,10,1.007,10h11.986c0.267,0,0.509-0.104,0.688-0.271L8.732,5.484L7,7z"></path>
                                        <path d="M13.684,0.271C13.504,0.103,13.262,0,12.993,0H1.007C0.74,0,0.498,0.104,0.318,0.273L7,6L13.684,0.271z"></path>
                                        <polygon points="0,0.878 0,9.186 4.833,5.079  "></polygon>
                                        <polygon points="9.167,5.079 14,9.186 14,0.875  "></polygon>
                                     </g>
                                </svg>
                            </th>
                            <td>luke_imhoff@rapid7.com</td>
                            <td>Kronic.Deth@gmail.com</td>
                        </tr>
                        <tr>
                            <th>
                                <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg"
                                     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16"
                                     enable-background="new 0 0 16 16" xml:space="preserve">
                                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"></path>
                               </svg>
                            </th>
                            <td>
                                <a href="https://github.com/limhoff-r7" target="_blank">@limhoff-r7</a>
                            </td>
                            <td>
                                <a href="https://github.com/KronicDeth" target="_blank">@KronicDeth</a>
                            </td>
                        </tr>
                        <tr>
                            <th>
                                <svg version="1.1" class="twitter-icon-svg"
                                            xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                                            <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
                c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
                c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
                C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
                c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
                c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"></path>
                                        </svg>
                            </th>
                            <td></td>
                            <td>
                                <a href="https://twitter.com/KronicDeth" target="_blank">@KronicDeth</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <aside class="notes">
                        <p>
                            I am a Senior Software Engineer at Rapid7 in Austin.  I works on Metasploit, a computer
                            security project that provides information about security vulnerabilities and aids in
                            penetration testing, written in Ruby, but I'm leading an effort to transition some of the
                            project to Elixir.
                        </p>
                        <p>
                            In my free time I am the maintainer of IntelliJ Elixir, an Elixir plugin for JetBrains IDEs,
                            like IntellIJ IDEA and Rubymine.
                        </p>
                    </aside>
				</section>
                <section>
                    <h1>Outline</h1>
                    <ol>
                        <li>
                            <a href="#/installation">Installation</a>
                        </li>
                        <li>
                            <a href="#/new">New Project</a>
                        </li>
                        <li>
                            <a href="#/configuration">Configuration</a>
                        </li>
                        <li>
                            <a href="#/tls">TLS</a>
                        </li>
                    </ol>
                </section>
                <section class="stack">
                    <section id="installation">
                        <h1>Installation</h1>
                        <ul>
                            <li>
                                <a href="#/installation-node">Node</a>
                            </li>
                            <li>
                                <a href="#/installation-mix"><code>mix</code> archives</a>
                            </li>
                        </ul>
                    </section>
                    <section id="installation-node">
                        <h1>Node</h1>
                        <table>
                            <thead>
                            <tr>
                                <th>Source</th>
                                <th>Linux</th>
                                <th>Mac</th>
                                <th>Windows</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <a href="https://nodejs.org/download/">nodejs.org</a>
                                </td>
                                <td>
                                    <a href="https://nodejs.org/dist/v0.12.7/node-v0.12.7-linux-x64.tar.gz">
                                        <code>tar.gz</code>
                                    </a>
                                </td>
                                <td>
                                    <a href="https://nodejs.org/dist/v0.12.7/node-v0.12.7.pkg">
                                        <code>pkg</code>
                                    </a>
                                <td>
                                    <a href="https://nodejs.org/dist/v0.12.7/node-v0.12.7-x86.msi">
                                        <code>msi</code>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>homebrew</td>
                                <td></td>
                                <td><code>brew install node</code></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>apt-get</td>
                                <td>
                                    <code>sudo apt-get install nodejs-legacy</code>
                                </td>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                Node is required for brunch.io, which is used for asset compilation.  It is optional,
                                but I'll be using it as it's easiest to setup when starting a new phoenix project.
                            </p>
                            <p>
                                I'm going to assume you already have Erlang and Elixir installed.
                            </p>
                        </aside>
                    </section>
                    <section id="installation-mix">
                        <h1>Installing Mix Archives</h1>
                        <pre><code class="bash" data-trim>
mix local.hex
mix archive.install https://github.com/phoenixframework/phoenix/releases/download/v0.17.0/phoenix_new-0.17.0.ez
                        </code></pre>
                        <aside class="notes">
                            <p>
                                <code>mix local.hex</code> ensures your version of the hex package manager is up-to-date.
                            </p>
                            <p>
                                The archive DOT install (<code>archive.install</code>) pulls down the
                                phoenix DOT new (<code>phoenix.new</code>) task from github.
                            </p>
                            <p>
                                As you can see by the URL, this talk is based on Phoenix zero dot seventeen (0.17),
                                which was the latest version as of 2015-08-20.  zero DOT seventeen is the last release
                                before one dot zero (1.0).
                            </p>
                        </aside>
                    </section>
                </section>
                <section class="stack">
                    <section id="new">
                        <h1>New Project</h1>
                        <ol>
                            <li>
                                <a href="#/new-mix-phoenix-options">
                                    <code>mix phoenix.new</code> Options
                                </a>
                            </li>
                            <li>
                                <a href="#/new-mix-phoenix">
                                    <code>mix phoenix.new</code>
                                </a>
                            </li>
                            <li>
                                <p>Fetch and Install Dependencies</p>
                                <ul>
                                    <li>
                                        <a href="#/new-fetch-and-install-dependencies">
                                            New
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#/new-clone-fetch-and-install-dependencies">
                                            Clone
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="#/new-run">
                                    Run
                                </a>
                            </li>
                        </ol>
                    </section>
                    <section id="new-mix-phoenix-options">
                        <h1>
                            <code>mix phoenix.new</code> Options
                        </h1>
                        <table>
                            <thead>
                            <tr>
                                <th>
                                    Option
                                </th>
                                <th>
                                    Description
                                </th>
                                <th>
                                    Format
                                </th>
                                <th>
                                    Example
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <code>--app APP</code>
                                </td>
                                <td>The name of the OTP application</td>
                                <td>Atom</td>
                                <td>
                                    <code>routing_securely_with_phoenix_framework</code>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>--database DATABASE</code>
                                </td>
                                <td>Specify the database adapter for ecto</td>
                                <td>
                                    <ul>
                                        <li>
                                            <code>mssql</code>
                                        </li>
                                        <li>
                                            <code>mysql</code>
                                        </li>
                                        <li>
                                            <code>postgres</code> (default)
                                        </li>
                                        <li>
                                            <code>sqlite</code>
                                        </li>
                                    </ul>
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>
                                    <code>--module MODULE</code>
                                </td>
                                <td>The name of the base module in the generated skeleton</td>
                                <td>Alias</td>
                                <td>
                                    <code>RoutingSecurelyWithPhoenixFramework</code>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>--no-ecto</code>
                                </td>
                                <td>Do not generate Ecto files for the model layer</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>
                                    <code>--no-brunch</code>
                                </td>
                                <td>Do not generate brunch files for static asset building</td>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                Normally, you don't need to specify any of these options and they are just derived
                                from the directory name, but if you want to use a different naming scheme or
                                nested namespaces, you'll need to manually override APP and MODULE.
                            </p>
                            <p>
                                By default, phoenix dot new (<code>phoenix.new</code>) will use Ecto with Postgres,
                                but if you prefer a different database you can override that with dash dash database
                                (<code>--database</code>).  If you don't need a database at all, you can disable Ecto
                                with dash dash no dash ecto (<code>--no-ecto</code>).
                            </p>
                            <p>
                                Even if you need a database, you could still create the project without ecto if you
                                want to use a built-in Erlang database like Mnesia or DETS.  Or a NOSQL alternative like
                                Riak that Ecto doesn't support.
                            </p>
                            <p>
                                You could dash dash no dash brunch (<code>--no-brunch</code>) if you want to use
                                something other than brunch, such as webpack, to compile your assets, or if you
                                don't have HTML or assets because you're just building a JSON API or channel server.
                            </p>
                        </aside>
                    </section>
                    <section id="new-mix-phoenix">
                        <h1>
                            <code>mix phoenix.new</code>
                        </h1>
                        <img alt="mix phoenix.new routing_securely_with_phoenix_framework"
                             class="stretch"
                             src="images/mix%20phoenix.new.png"/>
                        <aside class="notes">
                            <p>
                                mix phoenix dot new (<code>mix phoenix.new</code>) with only a path will create config
                                files for dev, prod, and test environments; a single endpoint for this project; views
                                for errors and layout; ExUnit-based tests; a user socket for handling client connections
                                for channels; a default page controller; templates for the layout and page views;
                                the routes; the Ecto repo; and the default assets.
                            </p>
                        </aside>
                    </section>
                    <section id="new-fetch-and-install-dependencies">
                        <h1>Fetch and Install Dependencies</h1>
                        <img alt="Fetch and install dependencies to install javascript libraries with npm install and install elixir dependencies with mix deps.get"
                             class="stretch"
                             src="images/fetch-and-install-dependencies.png">
                        <aside class="notes">
                            <p>
                                mix phoenix dot new (<code>mix phoenix.new</code>) is interactive and after creating the
                                files we saw on the last slide, the mix task will ask if you want to install
                                dependencies.
                            </p>
                            <p>
                                Saying 'yes', will install the javascript dependencies with N-P-M install
                                (<code>npm install</code>) and the Elixir dependencies with mix deps dot get
                                (<code>mix deps.get</code>)
                            </p>
                            <p>
                                Please take note that the prompt only happens when creating a new project.  If you clone
                                a pre-existing project...
                            </p>
                        </aside>
                    </section>
                    <section id="new-clone-fetch-and-install-dependencies">
                        <h1>Fetching and Install Dependencies for Clone</h1>
                        <table class="stretch">
                            <thead>
                            <tr>
                                <th>Error</th>
                                <th>Solution</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <img alt="Error telling user to run mix deps.get when running mix phoenix.server"
                                         src="images/unchecked-dependency-error.png"
                                         style="height: 40; width: auto"/>
                                </td>
                                <td>
                                    <code>mix deps.get</code>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img alt="Error telling user to run npm install for brunch when running mix phoenix.server"
                                         src="images/node-watcher-error.png"
                                         style="height: 40vh; width: auto"/>
                                </td>
                                <td>
                                    <code>npm install</code>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                ...you need to run mix deps dot get (<code>mix deps.get</code>) and
                                N-P-M install (<code>npm install</code>) manually.
                            </p>
                            <p>
                                If you forget to run either of these steps and start mix phoenix dot server
                                (<code>mix phoenix.server</code>), the log will helpfully contain errors telling you
                                the command to run.
                            </p>
                            <p>
                                In Phoenix, and Elixir in general, if an error message isn't helpful it is considered a
                                bug and you should open an issue with the project on Github.
                            </p>
                        </aside>
                    </section>
                    <section>
                        <h1>Run your application</h1>
                        <img alt="cd routing_securely_with_phoenix; mix ecto.create; mix phoenix.server"
                             class="stretch"
                             src="images/run.png"/>
                        <aside class="notes">
                            <p>
                                The output from mix phoenix dot new (<code>mix phoenix.new</code>) will now tell you
                                to C-D (<code>cd</code>) to project directory; create the database; and run the server,
                                but before you do that you should secure your database.
                            </p>
                        </aside>
                    </section>
                </section>
                <section class="stack">
                    <section id="configuration">
                        <h1>Configuration</h1>
                        <ul>
                            <li>
                                <a href="#/configuration-default">
                                    Default Configuration
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-remove-shared-secret-key-base">
                                    Remove Shared <code>secret_key_base</code>
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-secret-configuration-for-each-environment">
                                    Secret configuration for each environment
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-secret-key-base">
                                    Generating new <code>secret_key_base</code>
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-password">
                                    Generating database passwords
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-dev-secret">
                                    <code>config/dev.secret.exs</code>
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-test-secret">
                                    <code>config/test.secret.exs</code>
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-create-user">
                                    Create PostgreSQL users
                                </a>
                            </li>
                            <li>
                                <a href="#/configuration-create-database">
                                    Create Database
                                </a>
                            </li>
                        </ul>
                    </section>
                    <section id="#/configuration">
                        <h1>Default Configuration</h1>
                        <table>
                            <thead>
                            <tr>
                                <th>Environment</th>
                                <th>Module</th>
                                <th>key</th>
                                <th>File</th>
                                <th>Source Controlled?</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>All</td>
                                <td>
                                    <code>Endpoint</code>
                                </td>
                                <td>
                                    <code>secret_key_base</code>
                                </td>
                                <td>
                                    <code>config/config.exs</code>
                                </td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>dev</code>
                                </td>
                                <td>
                                    <code>Repo</code>
                                </td>
                                <td>
                                    <code>password</code>
                                </td>
                                <td>
                                    <code>config/dev.exs</code>
                                </td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>prod</code>
                                </td>
                                <td>
                                    <code>Endpoint</code>
                                </td>
                                <td>
                                    <code>secret_key_base</code>
                                </td>
                                <td>
                                    <code>config/prod.secret.exs</code>
                                </td>
                                <td>No</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>prod</code>
                                </td>
                                <td>
                                    <code>Repo</code>
                                </td>
                                <td>
                                    <code>password</code>
                                </td>
                                <td>
                                    <code>config/prod.secret.exs</code>
                                </td>
                                <td>No</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>test</code>
                                </td>
                                <td>
                                    <code>Repo</code>
                                </td>
                                <td>
                                    <code>password</code>
                                </td>
                                <td>
                                    <code>config/test.exs</code>
                                </td>
                                <td>Yes</td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                Phoenix projects have two secrets: the secret key base and the database password.
                            </p>
                            <p>
                                The secret key base is used by Plug for the session encryption and signing and by
                                Phoenix for channel tokens.  If the secret key base is disclosed, it's possible to
                                either read session cookies or fake cookies by signing session cookies containing your
                                own data.
                            </p>
                            <p>
                                The database password is of course used to log into database.  If the database password
                                is disclosed all your data is accessible.
                            </p>
                            <p>
                                By default, the <code>prod</code> secrets are kept is a separate prod dot secret dot
                                E-X-S (<code>prod.secret.exs</code>) that is git ignored.  Not keeping production
                                secrets in source control is a best practice.
                            </p>
                            <p>
                                But, by default, Phoenix does keep your development and test secrets in source control.
                                I see two problems with this: first, it means that your entire team uses the same
                                secrets and second, if your repository is public I can see your secrets on github.
                            </p>
                            <p>
                                You may think these aren't issues because they're not meant for production, but
                                if you end up replicating part of your production data to development to fix a bug
                                and some one gets access to your network, you can end up divulging production data to
                                the attacker.
                            </p>
                            <p>
                                Additionally, if you have reused and/or weak password, an attacker can use your
                                <code>dev</code> or <code>test</code> passwords to more easily guess your production
                                passwords.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-remove-shared-secret-key-base">
                        <h1>Remove shared <code>secret_key_base</code></h1>
                        <img alt="Remove secret_key_base from config/config.exs"
                             class="stretch"
                             src="images/remove-secret-key-base-from-config-config-exs.png"/>
                        <aside class="notes">
                            <p>
                                The first step to securing the configuration is to remove the shared
                                <code>secret_key_base</code> from <code>config/config.exs</code>, which will force
                                each environment to supply their own <code>secret_key_base</code>.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-secret-configuration-for-each-environment">
                        <h1>Secret configuration for each environment</h1>
                        <figure>
                            <figcaption>
                                Remove secret configuration import from <code>config/prod.exs</code>
                            </figcaption>
                            <img alt="Remove improt_config &quot;prod.secret.exs&quot; in config/prod.exs"
                                 src="images/remove-secret-configuration-import-from-prod.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <figure>
                            <figcaption>
                                Import secret configuration for each environment in <code>config/config.exs</code>
                            </figcaption>
                            <img alt="import_config &quot;#{Mix.env}.secret.exs&quot; in config/config.exs"
                                 src="images/import-config-mix-env-secret-exs.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <figure>
                            <figcaption>
                                Ignore all secret configurations in git
                            </figcaption>
                            <img alt="git ignore config/*.secret.exs instead of config/prod.secret.exs"
                                 src="images/git-ignore-all-secret-configurations.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <aside class="notes">
                            <p>
                                The secrets for all configurations should be kept out of source control, so we'll remove
                                the import config prod dot secret dot E-X-S
                                (<code>import_config "prod.secret.exs"</code>) from config slash prod dot E-X-S
                                (<code>config/prod.exs</code>) and add an import that uses mix dot env
                                (<code>Mix.env</code>) to import an environment-specific secret configuration in
                                config slash config dot E-X-S (<code>config/config.exs</code>).
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-secret-key-base">
                        <h1>Generating new <code>secret_key_base</code></h1>
                        <pre><code class="elixir" data-trim>
iex(1)> length = 64
64
iex(2)> :crypto.strong_rand_bytes(length) |> Base.encode64 |> binary_part(0, length)
                        </code></pre>
                        <aside class="notes">
                            <p>
                                crypto strong rand bytes (<code>:crypto.strong_random_bytes</code>) is the equivalent of
                                using secure random (<code>SecureRandom</code>) in Ruby or reading from slash dev slash
                                random (<code>/dev/random</code>) in Linux.
                            </p>
                            <p>
                                This is the same code as mix phoenix dot new (<code>mix phoenix.new</code>) uses.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-password">
                        <h1>Generating database password</h1>
                        <ul>
                            <li>
                                Use a password manager
                            </li>
                            <li>
                                Make the password long (> 16 characters)
                            </li>
                            <li>
                                Replace password every 90 days
                            </li>
                        </ul>
                        <br/>
                        <img alt="Using KeePass to generate a 64 character password with lowe letter, upper letters, numbers, and special characters that expires in 3 months"
                             class="scretch"
                             src="images/keepassx.png"/>
                        <aside class="notes">
                            <p>
                                The advice for a strong password applies even more so for <code>prod</code> than it does
                                for <code>dev</code> or <code>test</code>.
                            </p>
                            <p>
                                In addition to replacing your passwords every 90 days you should do the same for your
                                secret key bases.  This will invalidate any active sessions that the user has, but this
                                is a good thing because your users should also be replacing their passwords every 90
                                days.
                            </p>
                            <p>
                                Here, I'm using KeePassX to generate a strong password and store it, so I have it on
                                file if I accidentally delete my secret configuration files.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-dev-secret">
                        <h1>Dev Secrets</h1>
                        <figure>
                            <figcaption>
                                Remove <code>Repo</code> configuration from <code>config/dev.exs</code>
                            </figcaption>
                            <img alt="Remove config APP_NAME, MODULE_NAME.Repo from config/dev.exs"
                                 src="images/remove-repo-from-config-dev-exs.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <figure>
                            <figcaption>
                                Create <code>config/dev.secret.exs</code>
                            </figcaption>
                            <pre><code class="elixir" data-trim>
use Mix.Config

# In this file, we keep development configuration that
# you likely want to automate and keep it away from
# your version control system.
config :routing_securely_with_phoenix_framework, RoutingSecurelyWithPhoenixFramework.Endpoint,
  secret_key_base: "SECRET_KEY_BASE"

# Configure your database
config :routing_securely_with_phoenix_framework, RoutingSecurelyWithPhoenixFramework.Repo,
  adapter: Ecto.Adapters.Postgres,
  database: "routing_securely_with_phoenix_framework_dev",
  host: "127.0.0.1",
  password: "PASSWORD",
  size: 20, # The amount of database connections in the pool
  username: "routing_securely_with_phoenix_framework_dev"
                            </code></pre>
                        </figure>
                        <aside class="notes">
                            <p>
                                The config slash dev dot secret dot exs (<code>config/dev.secret.exs</code>) will have
                                the secret key base for the endpoint and the entire repo configuration.
                            </p>
                            <p>
                                You could put the common keys for the repo configuration in config slash config dot
                                E-X-S (<code>config/config/exs</code>), but this way the reader doesn't need to know
                                which keys are defaults.
                            </p>
                            <p>
                                Notice that I'm using a separate username, that matches the database name.  This way the
                                user can have the minimum permissions to only interact with its own database.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-test-secret">
                        <h1>Test Secrets</h1>
                        <figure>
                            <figcaption>
                                Remove <code>Repo</code> configuration from <code>config/test.exs</code>
                            </figcaption>
                            <img alt="Remove config APP_NAME, MODULE_NAME.Repo from config/test.exs"
                                 src="images/remove-repo-from-config-test-exs.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <figure>
                            <figcaption>
                                Create <code>config/test.secret.exs</code>
                            </figcaption>
                            <pre><code class="elixir" data-trim>
use Mix.Config

# In this file, we keep development configuration that
# you likely want to automate and keep it away from
# your version control system.
config :routing_securely_with_phoenix_framework, RoutingSecurelyWithPhoenixFramework.Endpoint,
  secret_key_base: "SECRET_KEY_BASE"

# Configure your database
config :routing_securely_with_phoenix_framework, RoutingSecurelyWithPhoenixFramework.Repo,
  adapter: Ecto.Adapters.Postgres,
  database: "routing_securely_with_phoenix_framework_test",
  password: "PASSWORD",
  pool: Ecto.Adapters.SQL.Sandbox,
  username: "routing_securely_with_phoenix_framework_test"
                            </code></pre>
                        </figure>
                        <aside class="notes">
                            <p>
                                The secrets for <code>test</code> look the same as those for <code>dev</code>, except
                                for the removal of the <code>size</code> option and addition of the <code>pool</code>in
                                <code>Repo</code>.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-create-user">
                        <h1>Create PostgreSQL Users</h1>
                        <table>
                            <thead>
                            <tr>
                                <th></th>
                                <th>Termianl</th>
                                <th>pgAdmin</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th>1</th>
                                <td>
                                    <code>createuser --createdb --encrypted --no-createrole --no-superuser --pwprompt USERNAME</code>
                                </td>
                                <td>Start pgAdmin3</td>
                            </tr>
                            <tr>
                                <th>2</th>
                                <td>Enter password</td>
                                <td>Connect to server</td>
                            </tr>
                            <tr>
                                <th>3</th>
                                <td>Enter password (again)</td>
                                <td>Right-click Login Roles</td>
                            </tr>
                            <tr>
                                <th>4</th>
                                <td></td>
                                <td>Click New Login Role</td>
                            </tr>
                            <tr>
                                <th>5</th>
                                <td></td>
                                <td>Enter <code>username<code> as Role Name</td>
                            </tr>
                            <tr>
                                <th>6</th>
                                <td></td>
                                <td>Change to Definition Tab</td>
                            </tr>
                            <tr>
                                <th>7</th>
                                <td></td>
                                <td>Enter password</td>
                            </tr>
                            <tr>
                                <th>8</th>
                                <td></td>
                                <td>Enter password (again)</td>
                            </tr>
                            <tr>
                                <th>9</th>
                                <td></td>
                                <td>Change to Role Privileges Tab</td>
                            </tr>
                            <tr>
                                <th>10</th>
                                <td></td>
                                <td>Click "Can create database"</td>
                            </tr>
                            <tr>
                                <th>11</th>
                                <td></td>
                                <td>Click OK</td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                I normally use pgAdmin3 to create users and database as it's easier to check my work,
                                but if you're following along and prefer something you can copy and paste into the
                                terminal, I've included that.
                            </p>
                        </aside>
                    </section>
                    <section id="configuration-create-database">
                        <h1>Create the database</h1>
                        <figure>
                            <figcaption><code>mix ecto.create</code> for new project</figcaption>
                            <img alt="Top lines of mix ecto.create in new project compile fs application"
                                 src="images/mix-ecto-create-uncompiled-top.png"
                                 style="height: auto; width: 100%"/>
                            <br/>
                            <img alt="Bottom lines of mix.ecto.create in new project generate app and finally create the database"
                                 src="images/mix-ecto-create-uncompiled-bottom.png.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <figure>
                            <figcaption><code>mix ecto.create</code> in built project</figcaption>
                            <img alt="mix ecto.create in a pre-built project does not compile and only creates the database"
                                 src="images/mix-ecto-create-compiled.png"
                                 style="height: auto; width: 100%"/>
                        </figure>
                        <aside class="notes">
                            <p>
                                Now with the secrets outside of source control, we can create the database using the
                                command that mix phoenix dot new (<code>mix phoenix.new</code>) gave us.
                            </p>
                            <p>
                                You may wonder what's going on when you run the command: you'll see all this output
                                about files being compiled and wonder why you're compiling to create a database.  Mix
                                compiles the dependencies before creating the database because Ecto is a dependency
                                of your project and so needs to be built for it to connect to PostgreSQL and create the
                                database.
                            </p>
                            <p>
                                If you run mix ecto dot create (<code>mix ecto.create</code>) in a project where the
                                dependencies are already compiled, then you'll just get the bottom message.  Seeing
                                the compilation message for ecto dot create (<code>ecto.create</code>) is a side-effect
                                of it being the first mix command you ran.
                            </p>
                        </aside>
                    </section>
                </section>
                <section class="stack">
                    <section id="tls">
                        <h1>TLS</h1>
                        <ul>
                            <li>
                                <a href="#/tls-overview">Overview</a>
                            </li>
                            <li>
                                <a href="#/tls-certificate-authority-key">Certificate Authority Key</a>
                            </li>
                            <li>
                                <a href="#/tls-self-signing-certificate-authority">
                                    Self-Signing Certificate Authority
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-self-signing-certificate-authority-distinguished-name">
                                    Self-Signing Certificate Authority Distinguished Name
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-self-signed-certificate-authority-view">
                                    Viewing your self-signed certificate
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-server-key">Server Key</a>
                            </li>
                            <li>
                                <a href="#/tls-server-certificate-signing-request">
                                    Server Certificate Signing Request
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-server-certificate-signing-request-distinguished-name">
                                    Server Certificate Signing Request Distinguished Name
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-signed-server-certificate">
                                    Signed Server Certificate
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-server-certificate-signing">
                                    Signing Server Certificate Request
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-trust-self-signed-certificate-authority">
                                    Trust Self-Signed Certificate Authority
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-fully-qualified-domain-setup">
                                    Fully-qualified Domain Setup
                                </a>
                            </li>
                            <li>
                                <a href="#/tls-testing">
                                    Testing TLS Connection
                                </a>
                            </li>
                        </ul>
                    </section>
                    <section id="tls-overview">
                        <h1>Overview</h1>
                        <ul>
                            <li>Transport Layer Security</li>
                            <li>Successor to SSL (Secure Socket Layer) 3.0</li>
                            <li>TLS 1.0 was defined in 1999</li>
                        </ul>
                        <aside class="notes">
                            <p>
                                H-T-T-P-S should no longer use S-S-L.  When speaking about the encryption for H-T-T-P-S,
                                you should say T-L-S now.
                            </p>
                            <p>
                                Phoenix, through Plug has built-in support for T-L-S without the need for a reverse
                                proxy like engine-X (<code>nginx</code>).
                            </p>
                        </aside>
                    </section>
                    <section id="tls-certificate-authority-key">
                        <h1>Certificate Authority Key</h1>
                        <table>
                            <caption><code>openssl genrsa -des3 -out certificate-authority.key 4096</code></caption>
                            <thead>
                            <tr>
                                <th>Option</th>
                                <th>Argument</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td></td>
                                <td>
                                    <code>genrsa</code>
                                </td>
                                <td>Generate RSA key</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-des3</code>
                                </td>
                                <td></td>
                                <td>Password protect the private key</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-out</code>
                                </td>
                                <td>
                                    <code>certificate-authority.key</code>
                                </td>
                                <td>
                                    Private Key file
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>4096</td>
                                <td>Number of bits in RSA key</td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                To start making our own certificate authority, we need to generate a private key for
                                the certificate authority.
                            </p>
                            <p>
                                Use your password manager to generate a long password for this private key.
                            </p>
                            <p>
                                We'll choose 4096 bits to be extra careful.  The current recommendation is only 2048
                                bits.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-self-signing-certificate-authority">
                        <h1>Self-Signing Certificate Authority</h1>
                        <table>
                            <caption>
                                <code>openssl req -new -x509 -days 365 -key certificate-authority.key -out certificate-authority.crt -sha256</code>
                            </caption>
                            <thead>
                            <tr>
                                <th>Option</th>
                                <th>Argument</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td></td>
                                <td>
                                    <code>req</code>
                                </td>
                                <td>X.509 Certificate Signing Request (CSR) Management</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-new</code>
                                </td>
                                <td></td>
                                <td>New Certificate Request</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-x509</code>
                                </td>
                                <td></td>
                                <td>Self-signed certificate</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-days</code>
                                </td>
                                <td>
                                    <code>365</code>
                                </td>
                                <td>Number of days certificate is valid</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-key</code>
                                </td>
                                <td>
                                    <code>certificate-authority.key</code>
                                </td>
                                <td>Input file name for private key used for signing</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-out</code>
                                </td>
                                <td>
                                    <code>certificate-authority.crt</code>
                                </td>
                                <td>
                                    Output file for self-signed certificate
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-sha256</code>
                                </td>
                                <td></td>
                                <td>Sign using SHA256 instead of SHA1</td>
                            </tr>
                            </tbody>
                        </table>
                        <aside class="notes">
                            <p>
                                Non-self-signed certificates usually last from 1 to 3 years.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-self-signing-certificate-authority-distinguished-name">
                        <h1>Self-Signing Certificate Authorithy Distinguished Name</h1>
                        <img alt="Entering C,ST,L,O,CN, and emailAddress for distinguished name"
                             class="stretch"
                             src="images/self-signing-certificate-authorithy-distinguished-name.png">
                    </section>
                    <section id="tls-self-signed-certificate-authority-view">
                        <h1>Viewing your self-signed certificate</h1>
                        <h2><code>openssl x509 -in certificate-authority.crt -noout -text</code></h2>
                        <img alt="Data stored in certificate-authority.pem"
                             class="stretch"
                             src="images/viewing-your-self-signed-certificate-authority.png">
                        <aside class="notes">
                            <p>
                                It's a good idea to check your work, which you can do with the X-509 subcommand
                                for <code>openssl</code>.
                            </p>
                            <p>
                                You can see that the Issuer and the Subject have the same distinguished name, which
                                is the hallmark of a self-signed certificate.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-server-key">
                        <h1>Server Key</h1>
                        <code>openssl genrsa -out server-${MIX_ENV}.key 4096</code>
                        <aside class="notes">
                            <p>
                                We'll generate a separate server key for each mix environment so that the server
                                certificate only works for the domain for each mix environemnt and we'll be alerted
                                if we start using the development or test URL with the wrong server.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-server-certificate-signing-request">
                        <h1>Server Certificate Signing Request</h1>
                        <code>openssl req -new -key server-${MIX_ENV}.key -out server-${MIX_ENV}.csr</code>
                        <aside class="notes">
                            <p>
                                Since the serer certificate is not self-signed, signing it is broken into two parts:
                                (1) the request for the server's key to be signed and (2) the certificate authority
                                actually doing the signing.
                            </p>
                            <p>
                                This two-part process makes sense when you think of how real Certificate Authorities
                                like Verisign have to sign your private key, but you don't want to send it to them to
                                do that.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-server-certificate-signing-request-distinguished-name">
                        <h1>Server Certificate Signing Request Distinguished Name</h1>
                        <img alt="Entering C,ST,L,O,CN, and emailAddress for distinguished name.  CN must match DNS name (dev.phoenix.localhost) of MIX_ENV server"
                             class="stretch"
                             src="images/server-certificate-signing-request-distinguished-name.png">
                        <aside class="notes">
                            <p>
                                I'll use the same country, state, locality, organization and email address as with the
                                self-signed certificate authority, but the Common Name for the server must match the
                                address I'll use to connect to the server, so in this case I'm using dev dot
                                phoenix dot localhost under the assumption that this is for <code>MIX_ENV=dev</code> and
                                I'll setup an etc host entry for dev dot phoenix dot locahost.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-server-certificate-signing">
                        <h1>Signing Server Certificate Request</h1>
                        <table>
                            <caption>
                                <code>openssl x509 -CA certificate-authority.crt  -CAcreateserial -CAkey certificate-authority.key -days 90 -in server-${MIX_ENV}.csr -out server-${MIX_ENV}.crt -req -sha256</code>
                            </caption>
                            <thead>
                            <tr>
                                <th>Option</th>
                                <th>Argument</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td></td>
                                <td>
                                    <code>x509</code>
                                </td>
                                <td>Certificate display and signing utility</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-CA</code>
                                </td>
                                <td>
                                    The Certificate Authority certificate
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-CAcreateserial</code>
                                </td>
                                <td></td>
                                <td>
                                    Create file for keeping track of CA issued certificate serial numbers if it does not
                                    exist and assign this certificate the next serial number.
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-CAkey</code>
                                </td>
                                <td>
                                    <code>certificate-authority.key</code>
                                </td>
                                <td>Certificate Authority private Key for signing request</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-days</code>
                                </td>
                                <td>
                                    <code>90</code>
                                </td>
                                <td>Days the server certificate is valid</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-in</code>
                                </td>
                                <td>
                                    <code>server-${MIX_ENV}.csr</code>
                                </td>
                                <td>
                                    Request to be signed
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-out</code>
                                </td>
                                <td>
                                    <code>server-${MIX_ENV}.crt</code>
                                </td>
                                <td>
                                    Signed certificate output file
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-req</code>
                                </td>
                                <td></td>
                                <td>Sign a certificate request</td>
                            </tr>
                            <tr>
                                <td>
                                    <code>-sha256</code>
                                </td>
                                <td></td>
                                <td>Sign with SHA256 instead of SHA1</td>
                            </tr>
                            </tbody>
                        </table>
                    </section>
                    <section id="tls-trust-self-signed-certificate-authority">
                        <h1>Trust Self-Signed Certificate Authority</h1>
                        <h2>OSX</h2>
                        <ol>
                            <li>Open Keychain Access</li>
                            <li>Click Plus</li>
                            <li>Select <code>certificate-authority.crt</code></li>
                            <li>Highlight the certificate</li>
                            <li>Click i</li>
                            <li>Expand Trust</li>
                            <li>Change "When using this certificate" to Always Trust</li>
                            <li>Close i Dialog</li>
                            <li>Enter password to save changes</li>
                        </ol>
                        <aside class="notes">
                            <p>
                                The whole purpose of creating a self-signed certificate authority instead of
                                a single self-signed server certificate, was so that only one certificate needed to be
                                trusted for all environments.
                            </p>
                            <p>
                                Trusting the certificate authority will turn the padlock from red to green and stop
                                certificate warnings from your browser.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-fully-qualified-domain-setup">
                        <h1>Fully Qualified Domain Setup</h1>
                        <ol>
                            <li><code><pre>sudo vim /etc/hosts</pre></code></li>
                            <li>Add <code><pre>127.0.0.1 dev.routing-securely-with-phoenix-framework.localhost</pre></code></li>
                            <li>Add <code><pre>127.0.0.1 prod.routing-securely-with-phoenix-framework.localhost</pre></code></li>
                            <li>Add <code><pre>127.0.0.1 test.routing-securely-with-phoenix-framework.localhost</pre></code></li>
                            <li>Restart Browsers</li>
                        </ol>
                        <aside class="notes">
                            <p>
                                In order to use your server certificates, you'll need a way for their common names to
                                point at your local server.
                            </p>
                            <p>
                                To keep it simple, I'm just adding entries to slash etc slash hosts
                                (<code>/etc/hosts</code>) instead of setting up local DNS.
                            </p>
                        </aside>
                    </section>
                    <section id="tls-testing">
                        <h1>Testing TLS connection</h1>
                        <ol>
                            <li>
                                <figure>
                                    <figcaption>
                                        Start Phoenix: <pre><code>mix phoenix.server</code></pre>
                                    </figcaption>
                                    <img alt="mix phoenix.server print cowboy URL"
                                         src="images/cowboy-url.png"
                                         style="height: auto; width: 100%"/>
                                </figure>
                            </li>
                            <li>Open URL printed by Cowboy</li>
                            <li>
                                <figure>
                                    <figcaption>Verify connection is private</figcaption>
                                    <img alt="Padlock is green and connection is private"
                                         src="images/private-connection.png"
                                         style="height: auto; width: 100%">
                                </figure>
                            </li>
                        </ol>
                        <aside class="notes">
                            <p>
                                With the certificate authority trusted and phoenix server over TLS we have the green
                                padlock and because we used to high bit count, there are no warnings from chrome that
                                the certificate is weak.
                            </p>
                        </aside>
                    </section>
                </section>
                <section>
                    <h1>Sources</h1>
                    <ul>
                        <li>
                            <a href="http://www.phoenixframework.org/docs/installation">Phoenix Framework Installation Guide</a>
                        </li>
                        <li>
                            <code>mix help phoenix.new</code>
                        </li>
                        <li>
                            <a href="http://datacenteroverlords.com/2012/03/01/creating-your-own-ssl-certificate-authority/">Creating your own SSL Certificate Authority</a>
                        </li>
                        <li>
                            <a href="http://web.mit.edu/crypto/openssl.cnf">MIT openssl configuration file</a>
                        </li>
                        <li>
                            <a href="http://rcardon.free.fr/websign/download/api-x509-ext/be/cardon/asn1/x509/extensions/KeyUsage.html">Key Usage docs</a>
                        </li>
                        <li>
                            Metasploit Pro
                        </li>
                    </ul>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                center: true,
                controls: true,
                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ],
                height: 1280,
                history: true,
                progress: true,
                // Slide number formatting can be configured using these variables:
                //  h: current slide's horizontal index
                //  v: current slide's vertical index
                //  c: current slide index (flattened)
                //  t: total number of slides (flattened)
                slideNumber: 'c / t',
                transition: 'slide', // none/fade/slide/convex/concave/zoom
                width: 2048
            });

        </script>

	</body>
</html>
